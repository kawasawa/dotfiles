---
applyTo: "**"
description: "このドキュメントは、AI エージェントに対して一貫性のある対応を促すための規約です。"
---

# カスタムインストラクション

このドキュメントは、AI エージェントに対して一貫性のある対応を促すための規約です。

## コミュニケーション規約

- 日本語で回答すること
- 簡潔にかつ具体的に回答すること
- 最新の情報に基づいて回答すること
- 公式のドキュメントや信頼できる情報源に基づいて回答すること
- 十分に普及した技術やツールを前提として回答すること

## コーディング規約

### 基本原則

下記の普遍的な原則に従ってください。

- DRY (Don't Repeat Yourself): 重複を避け、再利用可能なコードを書くこと
- KISS (Keep It Short and Simple): 複雑な解決策を避け、完結で単純なコードを書くこと
- YAGNI (You Aren't Gonna Need It): 今必要なコードだけを書くこと
- PIE (Program Intently and Expressively): 実装の意図が明確なコードを書くこと
- SLAP (Single Level of Abstraction Principle): 関数内では処理の抽象度を揃えたコードを書くこと
- OFOP (One Fact One Place): データベースのテーブル設計は第三正規化まで行うこと

### 製品コードの実装ルール

下記に従い実装してください。

- ファイルの命名規則は使用するプログラミング言語またはフレームワークのベストプラクティスに従うこと
- ディレクトリ構成は使用するプログラミング言語またはフレームワークのベストプラクティスに従うこと
- デザインパターンは使用するプログラミング言語またはフレームワークのベストプラクティスに従うこと
- サードパーティー製のパッケージを追加する場合は、採用実績が多いものを優先して選定すること
- セキュリティを考慮して実装すること
  - 機密情報をログに出力しないこと
  - 機密情報をサーバサイドからのレスポンスに含めないこと
  - 機密情報をクライアントサイドで扱わないこと
  - API やフォームに対する入力値にはバリデーションを行うこと
  - CSRF, XSS, SQL インジェクション等の一般的な攻撃手法への対策を行うこと
- パフォーマンスを考慮して実装すること
- テスタビリティを考慮して実装すること
- 関数と定数には日本語でドキュメントコメントを記述すること
- 関数内では意味のあるまとまりごとに処理を区切り、日本語でコメントを記述すること

### テストコードの実装ルール

テストコードでは、これまでに定義されたルールに加え、更に下記に従い実装してください。

- テストコードはテスト対象の製品コードと同一のプログラミング言語で記述すること
- テストコードは AAA (Arrange: 準備, Act: 実行, Assert: 検証) パターンに従って記述すること
- テスト対象の製品コードが他のモジュールに依存している場合は、モックを使用して依存関係を解消すること
  - モックは実際の実装を忠実に模倣する必要は無く、テストで必要となる特定の振る舞いを再現するのみで良い
- 必ず成功するアサーションなど無意味なコードは記述しないこと
  - 例: `expect(true).toEqual(true);` や `Assert.Equal(1, 1);` など
- テストケース名は日本語で簡潔に記述すること
- エッジケースをカバーすること
- C0 カバレッジ 95% 以上を目指すこと
- C1 カバレッジ 85% 以上を目指すこと
